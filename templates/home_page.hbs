{{#if settings.icons_enabled}}
<script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {

    // get the real paths of icon assets on the instance
    var iconAssets = {
      "icon-account.svg": "{{asset 'icon-account.svg'}}",
      "icon-action.svg": "{{asset 'icon-action.svg'}}",
      "icon-attachment.svg": "{{asset 'icon-attachment.svg'}}",
      "icon-bulb.svg": "{{asset 'icon-bulb.svg'}}",
      "icon-call.svg": "{{asset 'icon-call.svg'}}",
      "icon-card.svg": "{{asset 'icon-card.svg'}}",
      "icon-condition.svg": "{{asset 'icon-condition.svg'}}",
      "icon-copy.svg": "{{asset 'icon-copy.svg'}}",
      "icon-delivery.svg": "{{asset 'icon-delivery.svg'}}",
      "icon-double-tick.svg": "{{asset 'icon-double-tick.svg'}}",
      "icon-filter.svg": "{{asset 'icon-filter.svg'}}",
      "icon-flag.svg": "{{asset 'icon-flag.svg'}}",
      "icon-goods.svg": "{{asset 'icon-goods.svg'}}",
      "icon-grid.svg": "{{asset 'icon-grid.svg'}}",
      "icon-home.svg": "{{asset 'icon-home.svg'}}",
      "icon-jobs.svg": "{{asset 'icon-jobs.svg'}}",
      "icon-legal.svg": "{{asset 'icon-legal.svg'}}",
      "icon-menu.svg": "{{asset 'icon-menu.svg'}}",
      "icon-message.svg": "{{asset 'icon-message.svg'}}",
      "icon-notification.svg": "{{asset 'icon-notification.svg'}}",
      "icon-price.svg": "{{asset 'icon-price.svg'}}",
      "icon-search.svg": "{{asset 'icon-search.svg'}}",
      "icon-security.svg": "{{asset 'icon-security.svg'}}",
      "icon-settings.svg": "{{asset 'icon-settings.svg'}}",
      "icon-sms.svg": "{{asset 'icon-sms.svg'}}",
      "icon-squares.svg": "{{asset 'icon-squares.svg'}}",
      "icon-wallet.svg": "{{asset 'icon-wallet.svg'}}",
      "icon-warning.svg": "{{asset 'icon-warning.svg'}}"
    };

    function loadJSON(callback, fileName) {
      var xobj = new XMLHttpRequest();
      xobj.overrideMimeType("application/json");
      xobj.open("GET", fileName, true);
      xobj.onreadystatechange = function () {
        if (xobj.readyState == 4 && xobj.status == "200") {
          // Required use of an anonymous callback as .open will NOT return
          // a value but simply returns undefined in asynchronous mode
          callback(xobj.responseText);
        }
      };
      xobj.send(null);
    }

    loadJSON(function (response) {
      var
        parsed = JSON.parse(response),
        element;

      // mapping in icons.json will be applied here so the proper image source
      // can be set for appriopriate category ID.
      Object.keys(parsed).forEach(function items(itemKey) {
        element = document.getElementById(itemKey)
        if (element != undefined) {
          element.setAttribute(
            "src",
            iconAssets[parsed[itemKey]]
          );
        }
      });

    }, "{{settings.icons}}");
  });
</script>
{{/if}}

<h1 class="visibility-hidden">{{ help_center.name }}</h1>

<section id="main-content" class="section hero">
  <div class="hero-inner">
    <h1 class="hero-h1">{{dc 'hero_welcome_message'}}</h1>
    <h2 class="visibility-hidden">{{ t 'search' }}</h2>
    <div style="text-align: initial;">
      <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" focusable="false" viewBox="0 0 12 12"
        class="search-icon" aria-hidden="true">
        <circle cx="4.5" cy="4.5" r="4" fill="none" stroke="currentColor" />
        <path stroke="currentColor" stroke-linecap="round" d="M11 11L7.5 7.5" />
      </svg>
      {{dc 'search_with_placeholder'}}
    </div>
  </div>
</section>

<div class="container">
  <div class="messages">
    {{#if settings.alert_enabled}}
    <section class="message message-alert">
      {{dc 'eqx_alert_content'}}
    </section>
    {{/if}}

    {{#if settings.info_enabled}}
    <section class="message message-info">
      {{dc 'eqx_info_content'}}
    </section>
    {{/if}}
  </div>
  <section class="section knowledge-base">
    <h2 class="visibility-hidden">{{ t 'categories' }}</h2>
    <section class="categories blocks">
      <ul class="blocks-list">
        {{#each categories}}
        {{#if ../has_multiple_categories}}
        <li class="blocks-item">
          <div class="blocks-image">
            <img id={{id}} src="{{asset 'icon-flag.svg'}}">
          </div>
          <a href='{{url}}' class="blocks-item-link">
            <span class="blocks-item-title">{{name}}</span>
            <span class="blocks-item-description">{{excerpt description}}</span>
          </a>
        </li>
        {{else}}
        {{#each sections}}
        <li class="blocks-item">
          <a href='{{url}}' class="blocks-item-link">
            <span class="blocks-item-title">
              {{name}}
            </span>
            <span class="blocks-item-description">{{excerpt description}}</span>
          </a>
        </li>
        {{/each}}
        {{/if}}
        {{/each}}
      </ul>
      {{pagination}}
    </section>

    {{#if promoted_articles}}
    <section class="articles">
      <h2>{{dc 'eqx_promoted_articles'}}</h2>
      <ul class="article-list promoted-articles">
        {{#each promoted_articles}}
        <li class="promoted-articles-item">
          <a href="{{url}}">
            {{title}}

            {{#if internal}}
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" focusable="false" viewBox="0 0 16 16"
              class="icon-lock" title="{{t 'internal'}}">
              <rect width="12" height="9" x="2" y="7" fill="currentColor" rx="1" ry="1" />
              <path fill="none" stroke="currentColor" d="M4.5 7.5V4a3.5 3.5 0 017 0v3.5" />
            </svg>
            {{/if}}
          </a>
        </li>
        {{/each}}
      </ul>
    </section>
    {{/if}}
  </section>

  {{#if help_center.community_enabled}}
  <section class="section home-section community">
    <h2>{{t 'community'}}</h2>
    {{#link 'community' class='community-link'}}
    {{t 'join_conversation'}}
    {{/link}}

    <div class="community-image"></div>
  </section>
  {{/if}}

  <section class="section home-section activity">
    {{#if settings.show_recent_activity}}
    {{recent_activity}}
    {{/if}}
  </section>

  {{#if settings.home_page_contact_enabled}}

  <h3 class="centered">{{dc "need_more_help"}}</h3>

  <section class="categories blocks">
    <ul class="blocks-list blocks-list-centered">

      <li class="blocks-button">
        <img src="{{asset 'icon-write-us.svg'}}">
        <div class="blocks-item-button">
          {{#if settings.default_form_id}}
          {{#link "new_request" class="olx-button olx-button-primary"}}
          {{dc "write_to_us"}}
          {{/link}}
          {{else}}
          <a class="olx-button olx-button-primary" href="{{dc 'eqx_ticket_form_id'}}">
            {{dc "write_to_us"}}
          </a>
          {{/if}}
        </div>
      </li>

      <li class="blocks-button blocks-button-chat">
        <img src="{{asset 'icon-chat.svg'}}">
        <div class="blocks-item-button">
          <a name="live-chat" onclick="zen.webWidget.show();" class="olx-button olx-button-primary">
            {{dc 'chat_live'}}
          </a>
        </div>
      </li>

    </ul>
  </section>

  <section class="categories blocks">
    <ul class="blocks-list blocks-list-centered">

      {{#if settings.phone_line1_enabled}}
      <li class="blocks-button">
        <img src="{{asset 'icon-call-us.svg'}}">
        <div class="blocks-item-button">
          <a href="tel:{{dc 'eqx_phone_line_one_number'}}" title="{{dc 'eqx_phone_line_one_number'}}"
            name="phone-line-1" data-phone-line1-number-title="{{dc 'eqx_phone_line_one_text'}}"
            data-phone-line1-number="{{dc 'eqx_phone_line_one_number'}}" class="olx-button olx-button-primary">
            {{dc 'eqx_phone_line_one_text'}}
          </a>
        </div>
      </li>
      {{/if}}

      {{#if settings.phone_line2_enabled}}
      <li class="blocks-button">
        <img src="{{asset 'icon-call-us.svg'}}">
        <div class="blocks-item-button">
          <a href="tel:{{dc 'eqx_phone_line_two_number'}}" title="{{dc 'eqx_phone_line_two_number'}}"
            name="phone-line-2" data-phone-line2-number-title="{{dc 'eqx_phone_line_two_text'}}"
            data-phone-line2-number="{{dc 'eqx_phone_line_two_number'}}" class="olx-button olx-button-primary">
            {{dc 'eqx_phone_line_two_text'}}
          </a>
        </div>
      </li>
      {{/if}}
    </ul>
    {{#if settings.phone_line1_enabled}}
    <div class="blocks-stacked blocks-stacked-centered">
      <span class="gray centered small">&ast;{{dc 'eqx_phone_line_one_business_hours_title'}}&nbsp;</span>
      <span class="gray centered small">{{dc 'eqx_phone_line_one_business_hours_subtitle'}}</span>
    </div>
    {{/if}}
    {{#if settings.phone_line2_enabled}}
    <div class="blocks-stacked blocks-stacked-centered">
      <span class="gray centered small">&ast;{{dc 'eqx_phone_line_two_business_hours_title'}}&nbsp;</span>
      <span class="gray centered small">{{dc 'eqx_phone_line_two_business_hours_subtitle'}}</span>
    </div>
    {{/if}}
  </section>

  {{/if}}

</div>
